// -------------------------------------------------------------
// 
// File Name: hdl_prj\hdlsrc\controllerPeripheralHdlAdi\velocityControlHdl\velocityControlHdl_Control_DQ_Currents.v
// Created: 2014-08-25 21:11:09
// 
// Generated by MATLAB 8.2 and HDL Coder 3.3
// 
// -------------------------------------------------------------


// -------------------------------------------------------------
// 
// Module: velocityControlHdl_Control_DQ_Currents
// Source Path: velocityControlHdl/Control_DQ_Currents
// Hierarchy Level: 4
// 
// Simulink subsystem description for velocityControlHdl/Control_DQ_Currents:
// 
// Linear Current Controllers
// 
// PID Blocks used for Control Design of Current Loop controllers.
// 
// -------------------------------------------------------------

`timescale 1 ns / 1 ns

module velocityControlHdl_Control_DQ_Currents
          (
           CLK_IN,
           reset,
           enb_1_2000_0,
           Reset_1,
           q_current_command,
           d_current_measured,
           q_current_measured,
           param_current_p_gain,
           param_current_i_gain,
           d_voltage,
           q_voltage
          );


  input   CLK_IN;
  input   reset;
  input   enb_1_2000_0;
  input   Reset_1;
  input   signed [17:0] q_current_command;  // sfix18_En15
  input   signed [17:0] d_current_measured;  // sfix18_En15
  input   signed [17:0] q_current_measured;  // sfix18_En15
  input   signed [17:0] param_current_p_gain;  // sfix18_En10
  input   signed [17:0] param_current_i_gain;  // sfix18_En2
  output  signed [17:0] d_voltage;  // sfix18_En12
  output  signed [17:0] q_voltage;  // sfix18_En12


  wire signed [17:0] d_current_command_1;  // sfix18_En15
  wire signed [18:0] D_Error_sub_cast;  // sfix19_En15
  wire signed [18:0] D_Error_sub_cast_1;  // sfix19_En15
  wire signed [18:0] D_Error_sub_temp;  // sfix19_En15
  wire signed [17:0] d_current_error;  // sfix18_En14
  wire signed [17:0] direct_voltage;  // sfix18_En12
  wire signed [18:0] Q_Error_sub_cast;  // sfix19_En15
  wire signed [18:0] Q_Error_sub_cast_1;  // sfix19_En15
  wire signed [18:0] Q_Error_sub_temp;  // sfix19_En15
  wire signed [17:0] q_current_error;  // sfix18_En14
  wire signed [17:0] quadrature_voltage;  // sfix18_En12

  // The controller regulates direct and quadrature currents. 
  // 
  // Current Controllers


  // <S1>/d_current_command
  assign d_current_command_1 = 18'sb000000000000000000;



  // <S1>/D_Error
  assign D_Error_sub_cast = d_current_command_1;
  assign D_Error_sub_cast_1 = d_current_measured;
  assign D_Error_sub_temp = D_Error_sub_cast - D_Error_sub_cast_1;
  assign d_current_error = D_Error_sub_temp[18:1];



  // <S1>/Control_Current
  velocityControlHdl_Control_Current   u_Control_Current   (.CLK_IN(CLK_IN),
                                                            .reset(reset),
                                                            .enb_1_2000_0(enb_1_2000_0),
                                                            .Reest(Reset_1),
                                                            .Err(d_current_error),  // sfix18_En14
                                                            .param_current_p_gain(param_current_p_gain),  // sfix18_En10
                                                            .param_current_i_gain(param_current_i_gain),  // sfix18_En2
                                                            .Out(direct_voltage)  // sfix18_En12
                                                            );

  assign d_voltage = direct_voltage;

  // <S1>/Q_Error
  assign Q_Error_sub_cast = q_current_command;
  assign Q_Error_sub_cast_1 = q_current_measured;
  assign Q_Error_sub_temp = Q_Error_sub_cast - Q_Error_sub_cast_1;
  assign q_current_error = Q_Error_sub_temp[18:1];



  // <S1>/Control_Current1
  velocityControlHdl_Control_Current1   u_Control_Current1   (.CLK_IN(CLK_IN),
                                                              .reset(reset),
                                                              .enb_1_2000_0(enb_1_2000_0),
                                                              .Reest(Reset_1),
                                                              .Err(q_current_error),  // sfix18_En14
                                                              .param_current_p_gain(param_current_p_gain),  // sfix18_En10
                                                              .param_current_i_gain(param_current_i_gain),  // sfix18_En2
                                                              .Out(quadrature_voltage)  // sfix18_En12
                                                              );

  assign q_voltage = quadrature_voltage;

endmodule  // velocityControlHdl_Control_DQ_Currents

